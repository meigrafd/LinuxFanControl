<!-- (c) 2025 LinuxFanControl contributors. MIT License. -->
<Window
    xmlns="https://github.com/avaloniaui"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:vm="clr-namespace:LinuxFanControl.Gui.ViewModels.Dialogs"
    x:Class="LinuxFanControl.Gui.Views.Dialogs.ImportDialog"
    Width="720" Height="420"
    CanResize="True"
    WindowStartupLocation="CenterOwner"
    Title="Import FanControl config"
    Background="{DynamicResource LFC.BackgroundBrush}">

  <Design.DataContext>
    <vm:ImportDialogViewModel/>
  </Design.DataContext>

  <Grid RowDefinitions="Auto,Auto,*,Auto" Margin="12" RowSpacing="8">

    <TextBlock Grid.Row="0" Text="Select FanControl.Release JSON to import" Foreground="{DynamicResource LFC.TextBrush}" FontSize="16" FontWeight="SemiBold"/>

    <StackPanel Grid.Row="1" Orientation="Horizontal" Spacing="8">
      <TextBox Width="520" Text="{Binding FilePath}" IsReadOnly="True"/>
      <Button Content="Browseâ€¦" Click="OnBrowse"/>
      <Button Content="Import" IsEnabled="{Binding CanImport}" Command="{Binding DoImportAsyncCommand}"/>
    </StackPanel>

    <Border Grid.Row="2" BorderBrush="{DynamicResource LFC.BorderBrush}" BorderThickness="1" Background="{DynamicResource LFC.PanelBrush}">
      <ScrollViewer>
        <ItemsControl Items="{Binding Warnings}">
          <ItemsControl.ItemTemplate>
            <DataTemplate>
              <TextBlock Margin="6,2" Foreground="{DynamicResource LFC.SubtleTextBrush}" Text="{Binding}"/>
            </DataTemplate>
          </ItemsControl.ItemTemplate>
        </ItemsControl>
      </ScrollViewer>
    </Border>

    <StackPanel Grid.Row="3" Orientation="Horizontal" HorizontalAlignment="Right" Spacing="8">
      <TextBlock Text="{Binding ResultText}" Foreground="{DynamicResource LFC.SubtleTextBrush}" VerticalAlignment="Center"/>
      <Button Content="Close" Click="OnClose"/>
    </StackPanel>

  </Grid>
</Window>
