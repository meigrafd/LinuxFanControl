<!-- (c) 2025 LinuxFanControl contributors. MIT License. -->
<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="clr-namespace:LinuxFanControl.Gui.ViewModels.Dialogs"
        x:Class="LinuxFanControl.Gui.Views.Dialogs.SetupDialog"
        Width="560" Height="380"
        CanResize="False"
        WindowStartupLocation="CenterOwner"
        Title="{Binding L.SetupTitle}">

  <Window.DataContext>
    <vm:SetupDialogViewModel/>
  </Window.DataContext>

  <Grid RowDefinitions="Auto,* ,Auto" Padding="16" >
    <!-- Header -->
    <StackPanel Orientation="Vertical" Spacing="4">
      <TextBlock Text="{Binding L.SetupHeadline}" FontSize="18" FontWeight="SemiBold"/>
      <TextBlock Text="{Binding L.ImportHint}" Opacity="0.8"/>
    </StackPanel>

    <!-- Content -->
    <Grid Grid.Row="1" ColumnDefinitions="*,*" RowDefinitions="Auto,Auto,Auto,Auto,Auto" Margin="0,12,0,12">
      <TextBlock Grid.Row="0" Grid.Column="0" VerticalAlignment="Center" Text="{Binding L.Theme}"/>
      <ComboBox Grid.Row="0" Grid.Column="1" Items="{Binding Themes}" SelectedItem="{Binding SelectedTheme}"/>

      <TextBlock Grid.Row="1" Grid.Column="0" VerticalAlignment="Center" Text="{Binding L.Language}"/>
      <ComboBox Grid.Row="1" Grid.Column="1" Items="{Binding Languages}" SelectedItem="{Binding SelectedLanguage}"/>

      <CheckBox Grid.Row="2" Grid.Column="0" Grid.ColumnSpan="2"
                IsChecked="{Binding RunDetection}"
                Content="{Binding L.RunDetection}"/>

      <Button Grid.Row="3" Grid.Column="0" Content="{Binding L.ImportFanControl}"
              Command="{Binding ImportCommand}" Margin="0,8,8,0"/>
      <TextBlock Grid.Row="3" Grid.Column="1" Text="{Binding ImportFileName}" VerticalAlignment="Center" TextTrimming="CharacterEllipsis"/>

      <TextBlock Grid.Row="4" Grid.Column="0" Grid.ColumnSpan="2" Foreground="#888"
                 Text="Note: detection progress will show logs from /tmp/daemon_lfc.log during the operation."/>
    </Grid>

    <!-- Footer -->
    <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right" Spacing="8">
      <Button Content="{Binding L.Cancel}" Command="{Binding CancelCommand}" MinWidth="100"/>
      <Button Content="{Binding L.Apply}"  Command="{Binding ApplyCommand}"  MinWidth="120" IsDefault="True"/>
    </StackPanel>
  </Grid>
</Window>
