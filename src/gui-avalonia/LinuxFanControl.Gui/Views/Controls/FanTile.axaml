<UserControl
    x:Class="LinuxFanControl.Gui.Views.Controls.FanTile"
    xmlns="https://github.com/avaloniaui"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:lvc="clr-namespace:LiveChartsCore.SkiaSharpView.Avalonia;assembly=LiveChartsCore.SkiaSharpView.Avalonia">
  <UserControl.Styles>
    <Style Selector="Border.tile">
      <Setter Property="Background" Value="#132235"/>
      <Setter Property="BorderBrush" Value="#1F2A3A"/>
      <Setter Property="BorderThickness" Value="1"/>
      <Setter Property="CornerRadius" Value="10"/>
      <Setter Property="Padding" Value="10"/>
    </Style>
    <Style Selector="TextBlock.title">
      <Setter Property="Foreground" Value="#E6F0FF"/>
      <Setter Property="FontWeight" Value="SemiBold"/>
      <Setter Property="FontSize" Value="14"/>
    </Style>
    <Style Selector="TextBlock.meta">
      <Setter Property="Foreground" Value="#B8C5D6"/>
      <Setter Property="FontSize" Value="12"/>
    </Style>
    <Style Selector="Button.flat">
      <Setter Property="Background" Value="#1F2A3A"/>
      <Setter Property="Foreground" Value="#E6F0FF"/>
      <Setter Property="BorderBrush" Value="#2C3E55"/>
      <Setter Property="BorderThickness" Value="1"/>
      <Setter Property="Padding" Value="6,4"/>
      <Setter Property="CornerRadius" Value="6"/>
    </Style>
  </UserControl.Styles>

  <Border Classes="tile" Width="320" Height="180">
    <Grid RowDefinitions="Auto,*,Auto">
      <!-- Header -->
      <Grid ColumnDefinitions="*,Auto,Auto" Margin="0,0,0,6">
        <TextBlock Classes="title" Text="{Binding Title}" VerticalAlignment="Center"/>
        <Button Classes="flat" Grid.Column="1" Content="Edit" Command="{Binding EditCommand}" Margin="6,0,0,0"/>
        <Button Classes="flat" Grid.Column="2" Content="Remove" Command="{Binding RemoveCommand}" Margin="6,0,0,0"/>
      </Grid>

      <!-- Chart (LiveCharts 2): remove unsupported props -->
      <lvc:CartesianChart Grid.Row="1"
                          Series="{Binding Series}"
                          Background="Transparent"
                          LegendPosition="Hidden"
                          ZoomMode="None"
                          AnimationsSpeed="0:0:0.25"
                          IsHitTestVisible="False" />

      <!-- Footer meta -->
      <Grid Grid.Row="2" ColumnDefinitions="*,*,*" Margin="0,6,0,0">
        <TextBlock Classes="meta" Text="{Binding Rpm, StringFormat='{}{0} RPM'}"/>
        <TextBlock Classes="meta" Grid.Column="1" Text="{Binding PwmDuty, StringFormat='{}{0}%'}" HorizontalAlignment="Center"/>
        <TextBlock Classes="meta" Grid.Column="2" Text="{Binding Temperature}" HorizontalAlignment="Right"/>
      </Grid>
    </Grid>
  </Border>
</UserControl>
